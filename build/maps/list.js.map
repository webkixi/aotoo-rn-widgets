{"version":3,"sources":["list.js"],"names":["item","require","View","Text","FlatList","uniqueId","Aotoo","merge","getKey","views","$listStyle","itemText","_list","props","stys","dealWithItem","obj","React","isValidElement","title","_index","index","$props","animated","data","renderItem","key","horizontal","numColumns","refreshing","keyExtractor","initialNumToRender","ItemSeparatorComponent","undefined","getItemLayout","header","ListHeaderComponent","footer","ListFooterComponent","onEndReached","onscrollend","onRefresh","onpulldown","onScroll","onscroll","onViewableItemsChanged","element","getElement","e","listSty","listStyle","_listStyle","className","module","exports","list"],"mappings":"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","file":"../list.js","sourcesContent":["const item = require('./item')\nconst { View, Text, FlatList } = require('react-native')\nconst uniqueId = Aotoo.uniqueId\nconst merge = Aotoo.merge\n\nfunction getKey(){\n  return uniqueId('foxkey_')\n}\n\nvar views = []\n\nvar $listStyle = {\n  \"list-v\": {},\n  \"list-h\": {},\n  itemText: {}\n}\n\nfunction _list(props, stys){\n  views = []\n\n  function dealWithItem(obj){\n    if (React.isValidElement(obj.item)) {\n      return obj.item\n    } else {\n      if (typeof obj.item == 'string' || typeof obj.item == 'number') {\n        obj.item = { title: obj.item }\n      }\n      obj.item._index = obj.index\n      return item(obj.item, stys, props)\n    }\n  }\n\n  var $props = {\n    animated: false,\n    data: props.data,\n    renderItem: dealWithItem,\n    key: 'fox_',\n    horizontal: false,\n    numColumns: 1,\n    refreshing: false,\n    keyExtractor: getKey,\n    initialNumToRender: 40,\n    ItemSeparatorComponent: undefined  //试试再写，这个需要为默认值\n    // ref: uniqueId('list_'),   ????\n  }\n\n  if (props.horizontal) {\n    $props.numColumns = 1\n    $props.horizontal = true\n  }\n\n  if (props.getItemLayout) {\n    $props.getItemLayout = props.getItemLayout\n  }\n\n  if (props.renderItem) {\n    $props.renderItem = props.renderItem\n  }\n\n  if (props.ItemSeparatorComponent) {\n    $props.ItemSeparatorComponent = props.ItemSeparatorComponent\n  }\n\n  if (props.header) {\n    $props.ListHeaderComponent = props.header\n  }\n\n  if (props.footer) {\n    $props.ListFooterComponent = props.footer\n  }\n\n  if (props.key) {\n    $props.key = $props.key + props.key\n  }\n\n  if (props.numColumns) {\n    $props.numColumns = props.numColumns\n  }\n\n  // 兼容aotoo的写法\n  if (props.onEndReached || props.onscrollend) {\n    $props.onEndReached = (props.onEndReached || props.onscrollend)\n  }\n\n  // 兼容aotoo的写法\n  if (props.onRefresh || props.onpulldown) {\n    $props.onRefresh = (props.onRefresh||props.onpulldown)\n    $props.refreshing = true\n  }\n\n  // 兼容aotoo的写法\n  if (props.onScroll || props.onscroll) {\n    $props.animated = true\n    $props.onScroll = (props.onScroll || props.onscroll)\n  }\n\n  if (props.onViewableItemsChanged) {\n    $props.onViewableItemsChanged = props.onViewableItemsChanged\n  }\n\n  var element = ''\n  var getElement = e => element=e\n\n  var listSty = $props.horizontal ? 'list-h' : 'list-v'\n  listSty = stys[listSty]\n\n  if (props.listStyle || stys.listStyle) {\n    var _listStyle = merge(props.listStyle, stys.listStyle)\n    listSty = [listSty, _listStyle]\n  }\n\n  if (props.className) {\n    if (stys[props.className]) {\n      listSty = stys[props.className]['listStyle']\n    }\n  }\n\n  return <View style={listSty}><FlatList ref={getElement} {...$props} /></View>\n}\n\nmodule.exports = function list(props, stys){\n  stys = merge( {}, $listStyle, stys)\n  return _list(props, stys)\n}\n"]}